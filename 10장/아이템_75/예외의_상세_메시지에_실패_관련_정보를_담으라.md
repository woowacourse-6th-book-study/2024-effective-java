# 아이템75: 예외의 상세 메시지에 실패 관련 정보를 담으라



## 핵심정리

- 예외 객체에 디버깅에 용이한 상세 메시지를 담으라
  - 문서와 소스코드 정보는 필요 없다
  - 가독성보다는 디버깅 용이성을 고려하라
  - 필요한 정보는 getter를 통해 제공하라
 
---

### default stack trace
- 예외 객체의 toString 호출
- 주로 예외 클래스 이름 뒤에 상세 메시지가 붙는다 ex) Exception in thread "main" java.lang.IllegalArgumentException: 오류
- 디버깅 용이성을 위해 예외 toString 메서드에 실패 원인 정보를 가능한 많이 담아야 한다.

---

### 예외에 관여된 매개변수, 필드를 모두 메시지에 담아야 한다.

- 인덱스 범위를 벗어난 원인은 여러가지가 있을 수 있다
- 시나리오1) 최솟값보다 작은 경우 > lowerBound
- 시나리오2) 최대값보다 큰 경우 > upperBound
- 시나리오3) 내부 불변식이 깨져 lowerBound가 upperBound보다 큰 경우

ex) 
```java
/**
 * IndexOutOfBoundsException을 생성한다
 * @param lowerBound 인덱스의 최솟값
 * @param upperBound 인덱스의 최댓값 +1
 * @param index 인덱스의 실제값
 */

public IndexOutOfBoundsException(int lowerBound, int upperBound, int index){
    //실패를 포착하는 상세 메시지를 생성한다.
    super(String.format("최솟값: %d, 최댓값: %d, 인덱스 :%d". lowerBound, upperBound, index));
    
    this.lowerBound = lowerBound;
    this.upperBound = upperBound;
    this.index = index;
}
```

---

### 어떤 데이터를 어떻게 담아야 할까?

<br>

**1) 문서와 소스코드 정보는 군더더기다**
- 파일 이름
- 오류가 발생한 줄 번호
- 스택에서 호출한 다른 메서드
=> 이미 스택 trace에서 제공한다

<br>

**2) 예외 상세 메시지 != 최종 사용자에게 보여줄 오류 메시지**
- 사용자를 위한 오류 메시지 : 가독성이 좋고 친절해야 한다
- 예외 상세 메시지 : 가독성보다 담긴 내용이 더 중요하다

<br>

**3) 실패와 관련된 정보를 접근자 메서드를 통해 제공하자**
- 앞선예에서 lowerBound, upperBound, index를 getter를 통해 제공하자
- 복구가 가능한 검사 예외에서 빛을 발한다

